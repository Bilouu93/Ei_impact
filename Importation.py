import pandas as pd

file_wb = './values_complet.csv'
df_wb = pd.read_csv(file_wb)
file_ts = './value_transversal_macro.csv'
df_ts = pd.read_csv(file_ts)

#traitement des variables à coef négatifs:
slice = df_wb['Valeurs'] < 0
df_wb.loc[slice, 'Variables'] = 'No_' + df_wb['Variables']
df_wb.loc[slice, 'Valeurs'] = df_wb['Valeurs'].abs()

# Création d'un dictionnaire variable : beta_variable
df_to_dic = df_wb.set_index('Variables')
dic_wb = df_to_dic['Valeurs'].to_dict()

var_trans = df_ts['Variables macro'].to_list()

lay_EI = pd.read_csv('layer_EI.csv', index_col='Unnamed: 0')
dic_EI = lay_EI.groupby('Métier').apply(lambda x: x.set_index('Variables transversales').to_dict()['Valeur']).to_dict()
dic_sum_Tmi = lay_EI.groupby('Variables transversales').sum().to_dict()['Valeur']

variables_EI = list(dic_EI['Consultant stratégie'].keys())
metier_EI = list(dic_EI.keys())


Trans_AB = [-71., -71., -71., -50., -50., -11., -50., -51., -51., -27., -49., -60., -43., -43.]
C_grp_input = {1: [('No_Criminality/Insecurity', 0.0, 1.0), ('No_Discrimination', 0.0, 1.0), ('Social coherence (cohésion sociale)', 0.0, 1.0), ('Traditionalism', 0.0, 1.0), ('Years in state', 0.0, 1.0), ('Academic education', 0.0, 1.0), ('Family education', 0.0, 1.0), ('Access to local services', 0.0, 1.0), ('Air and water pollution', 0.0, 1.0), ('Close to green spaces', 0.4, 1.0), ('Housing quality', 0.0, 1.0), ('No_No accès to health services', 0.0, 1.0), ('No_No access to food', 0.0, 1.0), ('No_No access to water', 0.0, 1.0), ('Noise pollution', 0.0, 1.0), ('Richessness fauna, flaura and landscape', 0.0, 1.0), ('Relative health', 0.0, 1.0), ('Relative salary', 0.0, 1.0), ('Family support', 0.0, 1.0), ('No_Famlily strain', 0.0, 1.0), ('Friends support', 1.0, 1.0), ('Having grandparents', 0.0, 1.0), ('Number of children', 0.0, 1.0), ('Partenaired', 0.5, 1.0), ('Positive relationships', 2.0, 1.0), ('Pregnancy', 0.0, 1.0), ('Social Closeness', 0.0, 1.0), ('Social integration', 2.0, 1.0), ('No_Tobacco and alcohol of others', 0.0, 1.0), ('No_Contribution to others', -0.5, 1.0), ('Emotional management', 0.0, 1.0), ('Managing impact of past experience', 0.0, 1.0), ('Positive habits', 0.5, 1.0), ('Stress management', 0.0, 1.0), ('Coping active (proactivity)', 0.5, 1.0), ('Efforts in life', 0.0, 1.0), ('No_Hypervigilence (=somatic amplification)', 0.0, 1.0), ('Selective secondary control(=commitment)', 0.0, 1.0), ('Compensatory primary control', 0.0, 1.0), ('Openness to new experiences', 0.5, 1.0), ('Evenement mastery', 0.0, 1.0), ('Goals in life', 0.0, 1.0), ('Self -control', 0.0, 1.0), ('Time management and anticipation', 0.0, 1.0), ('(Need of Security)', 0.0, 1.0), ('Altruism', 0.0, 1.0), ('Gratitude', 0.0, 1.0), ('Honesty', 0.0, 1.0), ('No_Agreebleness', 0.0, 1.0), ('Extraversion', 1.0, 1.0), ('No_Health locus of control', 0.0, 1.0), ('Optimism', 0.0, 1.0), ('No_Social potency', 0.0, 1.0), ('No_Sympathy', 0.0, 1.0), ('Consciensciousness', 0.0, 1.0), ('Living the moment', 0.0, 1.0), ('Physical attractiveness', 0.5, 1.0), ('Self protection', 0.0, 1.0), ('Self-efficacy', 0.0, 1.0), ('No_Alcohol problems', 0.0, 1.0), ('No_Drug consumption', 0.0, 1.0), ('Food', 0.0, 1.0), ('Social networks', 0.0, 1.0), ('No_Tobacco', 0.0, 1.0), ('No_Mental health professsionnal', 0.0, 1.0), ('No_Aches', 0.0, 1.0), ('Diseases', 0.0, 1.0), ('No_Sleep problems', 0.0, 1.0), ('Games', 0.0, 1.0), ('Intellectual activities', 0.0, 1.0), ('Physical activity', 0.5, 1.0), ('Political participation', 0.0, 1.0), ('Sex life', 0.5, 1.0), ('Spiritual and religious experiences', 0.0, 1.0), ('Assessment financial situation', 0.0, 1.0), ('Assessment professionnal life', 0.0, 1.0), ('Balance btw personal and professional life', 0.5, 1.0), ('Control over professionnal life', 0.0, 1.0), ('Financial situation effort', 0.0, 1.0), ('taille', 70, 2.0)], 2: [('No_Criminality/Insecurity', 0.0, 1.0), ('No_Discrimination', 0.0, 1.0), ('Social coherence (cohésion sociale)', 0.0, 1.0), ('Traditionalism', 0.0, 1.0), ('Years in state', 0.0, 1.0), ('Academic education', 0.0, 1.0), ('Family education', 0.0, 1.0), ('Access to local services', 0.0, 1.0), ('Air and water pollution', 0.0, 1.0), ('Close to green spaces', 0.2, 1.0), ('Housing quality', 0.0, 1.0), ('No_No accès to health services', 0.0, 1.0), ('No_No access to food', 0.0, 1.0), ('No_No access to water', 0.0, 1.0), ('Noise pollution', 0.0, 1.0), ('Richessness fauna, flaura and landscape', 0.0, 1.0), ('Relative health', 0.0, 1.0), ('Relative salary', 0.0, 1.0), ('Family support', 0.0, 1.0), ('No_Famlily strain', 0.0, 1.0), ('Friends support', 0.5, 1.0), ('Having grandparents', 0.0, 1.0), ('Number of children', 0.0, 1.0), ('Partenaired', 0.25, 1.0), ('Positive relationships', 1.0, 1.0), ('Pregnancy', 0.0, 1.0), ('Social Closeness', 0.0, 1.0), ('Social integration', 1.0, 1.0), ('No_Tobacco and alcohol of others', 0.0, 1.0), ('No_Contribution to others', -1.0, 1.0), ('Emotional management', 0.0, 1.0), ('Managing impact of past experience', 0.0, 1.0), ('Positive habits', 0.5, 1.0), ('Stress management', 0.0, 1.0), ('Coping active (proactivity)', 0.5, 1.0), ('Efforts in life', 0.0, 1.0), ('No_Hypervigilence (=somatic amplification)', 0.0, 1.0), ('Selective secondary control(=commitment)', 0.0, 1.0), ('Compensatory primary control', 0.0, 1.0), ('Openness to new experiences', 0.5, 1.0), ('Evenement mastery', 0.0, 1.0), ('Goals in life', 0.0, 1.0), ('Self -control', 0.0, 1.0), ('Time management and anticipation', 0.0, 1.0), ('(Need of Security)', 0.0, 1.0), ('Altruism', 0.0, 1.0), ('Gratitude', 0.0, 1.0), ('Honesty', 0.0, 1.0), ('No_Agreebleness', 0.0, 1.0), ('Extraversion', 0.5, 1.0), ('No_Health locus of control', 0.0, 1.0), ('Optimism', 0.0, 1.0), ('No_Social potency', 0.0, 1.0), ('No_Sympathy', 0.0, 1.0), ('Consciensciousness', 0.0, 1.0), ('Living the moment', 0.0, 1.0), ('Physical attractiveness', 0.5, 1.0), ('Self protection', 0.0, 1.0), ('Self-efficacy', 0.0, 1.0), ('No_Alcohol problems', 0.0, 1.0), ('No_Drug consumption', 0.0, 1.0), ('Food', 0.0, 1.0), ('Social networks', 0.0, 1.0), ('No_Tobacco', 0.0, 1.0), ('No_Mental health professsionnal', 0.0, 1.0), ('No_Aches', 0.0, 1.0), ('Diseases', 0.0, 1.0), ('No_Sleep problems', 0.0, 1.0), ('Games', 0.0, 1.0), ('Intellectual activities', 0.0, 1.0), ('Physical activity', 0.5, 1.0), ('Political participation', 0.0, 1.0), ('Sex life', 0.25, 1.0), ('Spiritual and religious experiences', 0.0, 1.0), ('Assessment financial situation', 0.0, 1.0), ('Assessment professionnal life', 0.0, 1.0), ('Balance btw personal and professional life', 0.5, 1.0), ('Control over professionnal life', 0.0, 1.0), ('Financial situation effort', 0.0, 1.0), ('taille', 20, 2.0)]}
B_input = {1: [('No_Criminality/Insecurity', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Discrimination', 0.0, 0.0, 30.0, 0.2, 0.3), ('Social coherence (cohésion sociale)', 0.0, 0.0, 30.0, 0.2, 0.3), ('Traditionalism', 0.0, 0.0, 30.0, 0.2, 0.3), ('Years in state', 0.0, 0.0, 30.0, 0.2, 0.3), ('Academic education', 0.0, 0.0, 30.0, 0.2, 0.3), ('Family education', 0.0, 0.0, 30.0, 0.2, 0.3), ('Access to local services', 0.0, 0.0, 30.0, 0.2, 0.3), ('Air and water pollution', 0.0, 0.0, 30.0, 0.2, 0.3), ('Close to green spaces', 0.0, 0.5, 30.0, 0.2, 0.3), ('Housing quality', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_No accès to health services', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_No access to food', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_No access to water', 0.0, 0.0, 30.0, 0.2, 0.3), ('Noise pollution', 0.0, 0.0, 30.0, 0.2, 0.3), ('Richessness fauna, flaura and landscape', 0.0, 0.0, 30.0, 0.2, 0.3), ('Relative health', 0.0, 0.0, 30.0, 0.2, 0.3), ('Relative salary', 0.0, 0.0, 30.0, 0.2, 0.3), ('Family support', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Famlily strain', 0.0, 0.0, 30.0, 0.2, 0.3), ('Friends support', 0.0, 0.0, 30.0, 0.2, 0.3), ('Having grandparents', 0.0, 0.0, 30.0, 0.2, 0.3), ('Number of children', 0.0, 0.0, 30.0, 0.2, 0.3), ('Partenaired', 0.0, 0.0, 30.0, 0.2, 0.3), ('Positive relationships', 0.0, 0.0, 30.0, 0.2, 0.3), ('Pregnancy', 0.0, 0.0, 30.0, 0.2, 0.3), ('Social Closeness', 0.0, 0.0, 30.0, 0.2, 0.3), ('Social integration', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Tobacco and alcohol of others', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Contribution to others', 0.0, 0.0, 30.0, 0.2, 0.3), ('Emotional management', 0.0, 0.0, 30.0, 0.2, 0.3), ('Managing impact of past experience', 0.0, 0.0, 30.0, 0.2, 0.3), ('Positive habits', 0.0, 0.5, 30.0, 0.2, 0.3), ('Stress management', 0.0, 0.5, 30.0, 0.2, 0.3), ('Coping active (proactivity)', 0.0, 0.0, 30.0, 0.2, 0.3), ('Efforts in life', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Hypervigilence (=somatic amplification)', 0.0, 0.0, 30.0, 0.2, 0.3), ('Selective secondary control(=commitment)', 0.0, 0.0, 30.0, 0.2, 0.3), ('Compensatory primary control', 0.0, 0.0, 30.0, 0.2, 0.3), ('Openness to new experiences', 0.0, 0.5, 30.0, 0.2, 0.3), ('Evenement mastery', 0.0, 0.5, 30.0, 0.2, 0.3), ('Goals in life', 0.0, 0.0, 30.0, 0.2, 0.3), ('Self -control', 0.0, 0.25, 30.0, 0.2, 0.3), ('Time management and anticipation', 0.0, 0.25, 30.0, 0.2, 0.3), ('(Need of Security)', 0.0, 0.0, 30.0, 0.2, 0.3), ('Altruism', 0.0, 0.0, 30.0, 0.2, 0.3), ('Gratitude', 0.0, 0.0, 30.0, 0.2, 0.3), ('Honesty', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Agreebleness', 0.0, 0.0, 30.0, 0.2, 0.3), ('Extraversion', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Health locus of control', 0.0, 0.0, 30.0, 0.2, 0.3), ('Optimism', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Social potency', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Sympathy', 0.0, 0.0, 30.0, 0.2, 0.3), ('Consciensciousness', 0.0, 0.0, 30.0, 0.2, 0.3), ('Living the moment', 0.0, 0.2, 30.0, 0.2, 0.3), ('Physical attractiveness', 0.0, 0.5, 30.0, 0.2, 0.3), ('Self protection', 0.0, 0.0, 30.0, 0.2, 0.3), ('Self-efficacy', 0.0, 1.0, 30.0, 0.2, 0.3), ('No_Alcohol problems', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Drug consumption', 0.0, 0.0, 30.0, 0.2, 0.3), ('Food', 0.0, 0.0, 30.0, 0.2, 0.3), ('Social networks', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Tobacco', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Mental health professsionnal', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Aches', -0.0, -0.5, 30.0, 0.2, 0.3), ('Diseases', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Sleep problems', 0.0, 0.0, 30.0, 0.2, 0.3), ('Games', 0.0, 0.0, 30.0, 0.2, 0.3), ('Intellectual activities', 0.0, 0.0, 30.0, 0.2, 0.3), ('Physical activity', 0.0, 1.0, 30.0, 0.2, 0.3), ('Political participation', 0.0, 0.0, 30.0, 0.2, 0.3), ('Sex life', 0.0, 0.0, 30.0, 0.2, 0.3), ('Spiritual and religious experiences', 0.0, 0.0, 30.0, 0.2, 0.3), ('Assessment financial situation', 0.0, 0.0, 30.0, 0.2, 0.3), ('Assessment professionnal life', 0.0, 0.0, 30.0, 0.2, 0.3), ('Balance btw personal and professional life', 0.0, 0.25, 30.0, 0.2, 0.3), ('Control over professionnal life', 0.0, 0.0, 30.0, 0.2, 0.3), ('Financial situation effort', 0.0, 0.0, 30.0, 0.2, 0.3), ('taille', 30, 30.0, 0.3, 0.3, True)], 2: [('No_Criminality/Insecurity', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Discrimination', 0.0, 0.0, 30.0, 0.2, 0.3), ('Social coherence (cohésion sociale)', 0.0, 0.0, 30.0, 0.2, 0.3), ('Traditionalism', 0.0, 0.0, 30.0, 0.2, 0.3), ('Years in state', 0.0, 0.0, 30.0, 0.2, 0.3), ('Academic education', 0.0, 0.0, 30.0, 0.2, 0.3), ('Family education', 0.0, 0.0, 30.0, 0.2, 0.3), ('Access to local services', 0.0, 0.0, 30.0, 0.2, 0.3), ('Air and water pollution', 0.0, 0.0, 30.0, 0.2, 0.3), ('Close to green spaces', 0.0, 2.0, 30.0, 0.2, 0.3), ('Housing quality', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_No accès to health services', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_No access to food', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_No access to water', 0.0, 0.0, 30.0, 0.2, 0.3), ('Noise pollution', 0.0, 0.0, 30.0, 0.2, 0.3), ('Richessness fauna, flaura and landscape', 0.0, 0.0, 30.0, 0.2, 0.3), ('Relative health', 0.0, 0.0, 30.0, 0.2, 0.3), ('Relative salary', 0.0, 0.0, 30.0, 0.2, 0.3), ('Family support', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Famlily strain', 0.0, 0.0, 30.0, 0.2, 0.3), ('Friends support', 0.0, 0.0, 30.0, 0.2, 0.3), ('Having grandparents', 0.0, 0.0, 30.0, 0.2, 0.3), ('Number of children', 0.0, 0.0, 30.0, 0.2, 0.3), ('Partenaired', 0.0, 0.0, 30.0, 0.2, 0.3), ('Positive relationships', 0.0, 0.0, 30.0, 0.2, 0.3), ('Pregnancy', 0.0, 0.0, 30.0, 0.2, 0.3), ('Social Closeness', 0.0, 0.0, 30.0, 0.2, 0.3), ('Social integration', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Tobacco and alcohol of others', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Contribution to others', 0.0, 0.0, 30.0, 0.2, 0.3), ('Emotional management', 0.0, 0.0, 30.0, 0.2, 0.3), ('Managing impact of past experience', 0.0, 0.0, 30.0, 0.2, 0.3), ('Positive habits', 0.0, 2.0, 30.0, 0.2, 0.3), ('Stress management', 0.0, 2.0, 30.0, 0.2, 0.3), ('Coping active (proactivity)', 0.0, 0.0, 30.0, 0.2, 0.3), ('Efforts in life', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Hypervigilence (=somatic amplification)', 0.0, 0.0, 30.0, 0.2, 0.3), ('Selective secondary control(=commitment)', 0.0, 0.0, 30.0, 0.2, 0.3), ('Compensatory primary control', 0.0, 0.0, 30.0, 0.2, 0.3), ('Openness to new experiences', 0.0, 0.5, 30.0, 0.2, 0.3), ('Evenement mastery', 0.0, 1.0, 30.0, 0.2, 0.3), ('Goals in life', 0.0, 0.0, 30.0, 0.2, 0.3), ('Self -control', 0.0, 0.5, 30.0, 0.2, 0.3), ('Time management and anticipation', 0.0, 1.0, 30.0, 0.2, 0.3), ('(Need of Security)', 0.0, 0.0, 30.0, 0.2, 0.3), ('Altruism', 0.0, 0.0, 30.0, 0.2, 0.3), ('Gratitude', 0.0, 0.0, 30.0, 0.2, 0.3), ('Honesty', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Agreebleness', 0.0, 0.0, 30.0, 0.2, 0.3), ('Extraversion', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Health locus of control', 0.0, 0.0, 30.0, 0.2, 0.3), ('Optimism', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Social potency', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Sympathy', 0.0, 0.0, 30.0, 0.2, 0.3), ('Consciensciousness', 0.0, 0.0, 30.0, 0.2, 0.3), ('Living the moment', 0.0, 0.8, 30.0, 0.2, 0.3), ('Physical attractiveness', 0.0, 2.0, 30.0, 0.2, 0.3), ('Self protection', 0.0, 0.0, 30.0, 0.2, 0.3), ('Self-efficacy', 0.0, 1.0, 30.0, 0.2, 0.3), ('No_Alcohol problems', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Drug consumption', 0.0, 0.0, 30.0, 0.2, 0.3), ('Food', 0.0, 0.0, 30.0, 0.2, 0.3), ('Social networks', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Tobacco', -0.0, -0.5, 30.0, 0.2, 0.3), ('No_Mental health professsionnal', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Aches', -0.0, -1.0, 30.0, 0.2, 0.3), ('Diseases', 0.0, 0.0, 30.0, 0.2, 0.3), ('No_Sleep problems', 0.0, 0.0, 30.0, 0.2, 0.3), ('Games', 0.0, 0.0, 30.0, 0.2, 0.3), ('Intellectual activities', 0.0, 0.0, 30.0, 0.2, 0.3), ('Physical activity', 0.0, 3.0, 30.0, 0.2, 0.3), ('Political participation', 0.0, 0.0, 30.0, 0.2, 0.3), ('Sex life', 0.0, 0.0, 30.0, 0.2, 0.3), ('Spiritual and religious experiences', 0.0, 0.0, 30.0, 0.2, 0.3), ('Assessment financial situation', 0.0, 0.0, 30.0, 0.2, 0.3), ('Assessment professionnal life', 0.0, 0.0, 30.0, 0.2, 0.3), ('Balance btw personal and professional life', 0.0, 1.0, 30.0, 0.2, 0.3), ('Control over professionnal life', 0.0, 0.0, 30.0, 0.2, 0.3), ('Financial situation effort', 0.0, 0.0, 30.0, 0.2, 0.3), ('taille', 10, 30.0, 0.3, 0.3, True)]}